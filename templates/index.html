{% extends 'template.html' %}
{% load isinstructor %}
{% block content %}
    <h3>Planning</h3>
    <div class="col-md-6">
        {% include 'widgets/planning_upload.html' %}
    </div>
    <div class="col-md-6">
        <input onkeyup="filterFunctionPlanning()" class="form-control" id="planningsearch"
               placeholder="Search...">
    </div>

    <table class="table table-hover" id="planningtable">
        <thead>
        <tr>
            <th width="100px">Datum</th>
            <th>ResNo</th>
            <th>Start</th>
            <th>Eind</th>
            <th>Relatie</th>
            <th>Aantal</th>
            <th>Artikel</th>
            <th>Info</th>
        </tr>
        </thead>
        <tbody>
        {% for booking in bookings %}
            <tr>
                <td>
                    {{ booking.datum|date:"d-m-Y" }}
                </td>
                <td>
                    {% if booking.resno %}
                        {{ booking.resno }}
                    {% endif %}
                </td>
                <td>
                    {{ booking.start|date:"H:i" }}
                </td>
                <td>
                    {{ booking.eind|date:"H:i" }}
                </td>
                <td>
                    {% if booking.relatie %}
                        {{ booking.relatie }}
                    {% endif %}
                </td>
                <td>
                    {{ booking.aantal }}
                </td>
                <td>
                    <div class="{{ booking.artikel|isinstructor }}">
                        {{ booking.artikel }}
                    </div>
                </td>
                <td>
                    {% if booking.relatie %}
                        {{ booking.info }}
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <script>
        function filterFunctionPlanning() {
            // Declare variables
            var input, filter, table, tr, i;
            input = document.getElementById("planningsearch");
            filter = input.value.toUpperCase();
            table = document.getElementById("planningtable");
            trs = table.getElementsByTagName("tr");


            // Loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < trs.length; i++) {
                tds = trs[i].getElementsByTagName("td");
                found = false;
                for (i2 = 0; i2 < tds.length; i2++) {
                    td = tds[i2];
                    if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                        found = true;
                    }
                }
                if (found) {
                    trs[i].style.display = "";
                } else {
                    trs[i].style.display = "none";
                }
            }


        }
    </script>
{% endblock %}
